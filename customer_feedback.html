<!DOCTYPE html>
<html>

<head>
  <base target="_top">
  <?!= include('header') ?>
  <style>
    .star {
      cursor: pointer;
      font-size: 2rem;
      color: #f5f5f5;
      /* White color */
    }
  </style>
</head>

<body class="parent">
  <? var url = getUrl(); ?>
  <div class="sticky top-0 z-50">
    <nav class="p-4 flex flex-wrap justify-between items-center sticky top-0 z-50"
      style="background-color: rgba(42, 40, 40, 0.2); backdrop-filter: blur(16px);">
      <div class="flex items-center mb-4 md:mb-0 w-full justify-between max-[800px]:mb-0">
        <img src="https://i.ibb.co/1dyvwzk/Horizontal-Logo-1.png" alt="EZBOOK Logo"
                    class="h-[60px] object-contain">
      </div>
    </nav>
    <div class="max-[320px]:h-[100px] sm:h-[74px] h-[74px] bg-[#2a282a] shadow-[8px_4px_4px_10px_#1d1c1d99]">
      <h1 class="text-lime-500 text-2xl pt-5 pl-5">Service Feedback Form</h1>
    </div>
  </div>
  <? if (error_message) { ?>
  <div class="mx-8 my-6 sm:mx-12 md:mx-24">
    <div class="py-4 px-5 bg-red-900 rounded-lg text-[#f5f5f5] flex">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
        class="w-6 h-6 mr-2">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z" />
      </svg>
      <p class="font-bold font-[ABeeZee]">
        <?!= error_message ?>
      </p>
    </div>
  </div>
  <? } ?>
  <div class="max-[425px]:m-8 sm:mx-12 sm:my-8 md:mx-24 md:my-16 font-[ABeeZee]">
    <div class="text-lg mt-2 mb-6 text-[#f5f5f5]">Your feedback helps us improve our home services. Please share
      your experience here.</div>
    <!-- Feedback Section -->
    <div class="my-4">
      <form method="post" action="<?= url ?>">
        <input class="hidden" name="action" value="provide_feedback">
        <div class="bg-[#1D1C1D] p-6 rounded-b-lg mb-8 font-[ABeeZee] text-[#f5f5f5] space-y-4">
          <div>
            <label for="bookingId">Booking ID</label>
            <input type="text" placeholder="Booking ID" name="bookingID" class="w-full p-2 bg-[#313131] rounded-md" required>
          </div>
          <div>
            <label for="feedback">Feedback</label>
            <textarea type="text" placeholder="Feedback" name="feedback" class="w-full p-2 bg-[#313131] rounded-md h-24"
                            required></textarea>
          </div>
          <div>
            <label class="block">Rating</label>
            <div class="flex space-x-2">
              <span class="star" data-value="1">&#9733;</span>
              <span class="star" data-value="2">&#9733;</span>
              <span class="star" data-value="3">&#9733;</span>
              <span class="star" data-value="4">&#9733;</span>
              <span class="star" data-value="5">&#9733;</span>
            </div>
            <input type="hidden" name="rating" id="rating" value="0">
          </div>
        </div>
        <!-- Submit Button -->
        <div class="mt-6 mr-4 flex justify-end">
          <button type="submit"
                    class="px-6 py-2 bg-[#d35833] text-[#f5f5f5] font-semibold rounded-md">Submit</button>
        </div>
      </form>
    </div>
  </div>
  <script>
    const stars = document.querySelectorAll('.star');
    const ratingInput = document.getElementById('rating');

    stars.forEach((star, index) => {
      star.addEventListener('click', () => {
        ratingInput.value = star.dataset.value; // Set the hidden input's value

        // Update the color of the stars based on the selection
        stars.forEach((s, i) => {
          if (i <= index) {
            s.style.color = '#D35833';
          } else {
            s.style.color = '#F5F5F5';
          }
        });
      });
    });
  </script>
</body>

</html>